<!DOCTYPE html>
<html lang="en" class="no-js">

<head>

<meta charset="utf-8">
<title>登陆</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="./common/nui/nui.js" type="text/javascript"></script>
<script src="./common/nui/locale/zh_CN.js" type="text/javascript"></script>
<script src="./common/nui/nui-debug.js" type="text/javascript"></script>
<!-- CSS -->
<link rel='stylesheet'
	href='http://fonts.googleapis.com/css?family=PT+Sans:400,700'>
<link rel="stylesheet" href="assets/css/reset.css">
<link rel="stylesheet" href="assets/css/supersized.css">
<link rel="stylesheet" href="assets/css/style.css">

<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

</head>

<body class="login">
	<div id="warpper" class="wrap">
		<div class="main">
			<div id="form1" class="login-box">
				<h3>罗圣伟之SSM框架学习平台</h3>
				<form method="post" name="loginForm" onsubmit="return login();"
					action="">
					<input id="original_url" class="nui-hidden" name="original_url"
						value="" />
					<p class="login-item">
						<em>用户名：</em> <input class="nui-textbox" id="acOperator/userid"
							name="name" style="width: 237px; height: 23px;"
							onenter="keyboardLogin" onvalidation="onCheckUserId" />
					</p>
					<p class="login-item">
						<em>密　码：</em> <input name="password" id="password"
							class="nui-password" onenter="keyboardLogin"
							style="width: 237px; height: 23px;" onenter="keyboardLogin"
							onvalidation="onCheckPassword" autocomplete="off" />
					</p>
					<p id="error" class="login-error"
						style="display: inline-block; height: 20px; color: red;"></p>
					<p align="center">
						<a class="nui-button" onclick="login"
							style="width: 60px; cursor: pointer; width: 50px; height: 20px; margin-top: -30px; padding: 0; background: #ef4300; -moz-border-radius: 6px; -webkit-border-radius: 6px; border-radius: 6px; border: 1px solid #ff730e; -moz-box-shadow: 0 15px 30px 0 rgba(255, 255, 255, .25) inset, 0 2px 7px 0 rgba(0, 0, 0, .2); -webkit-box-shadow: 0 15px 30px 0 rgba(255, 255, 255, .25) inset, 0 2px 7px 0 rgba(0, 0, 0, .2); box-shadow: 0 15px 30px 0 rgba(255, 255, 255, .25) inset, 0 2px 7px 0 rgba(0, 0, 0, .2); font-family: 'PT Sans', Helvetica, Arial, sans-serif; font-size: 14px; font-weight: 700; color: #fff; text-shadow: 0 1px 2px rgba(0, 0, 0, .1); -o-transition: all .2s; -moz-transition: all .2s; -webkit-transition: all .2s; -ms-transition: all .2s;">登陆</a>
						<a onclick="reset" class="nui-button"
							style="width: 60px; cursor: pointer; width: 50px; height: 20px; margin-top: -30px; padding: 0; background: #ef4300; -moz-border-radius: 6px; -webkit-border-radius: 6px; border-radius: 6px; border: 1px solid #ff730e; -moz-box-shadow: 0 15px 30px 0 rgba(255, 255, 255, .25) inset, 0 2px 7px 0 rgba(0, 0, 0, .2); -webkit-box-shadow: 0 15px 30px 0 rgba(255, 255, 255, .25) inset, 0 2px 7px 0 rgba(0, 0, 0, .2); box-shadow: 0 15px 30px 0 rgba(255, 255, 255, .25) inset, 0 2px 7px 0 rgba(0, 0, 0, .2); font-family: 'PT Sans', Helvetica, Arial, sans-serif; font-size: 14px; font-weight: 700; color: #fff; text-shadow: 0 1px 2px rgba(0, 0, 0, .1); -o-transition: all .2s; -moz-transition: all .2s; -webkit-transition: all .2s; -ms-transition: all .2s;">重置</a>
				        <ul id="validGroup1" class="validGroup"></ul>
				    </p>
				</form>
			</div>
			<!-- Javascript -->
			<script src="assets/js/jquery-1.8.2.min.js"></script>
			<script src="assets/js/supersized.3.2.7.min.js"></script>
			<script src="assets/js/supersized-init.js"></script>
			<script src="assets/js/scripts.js"></script>
			<script src="assets/js/love.js"></script>
			<div class="foot">
			<p>Copyright 2017-2018© 罗圣伟版权所有 本站已稳定运行： <SPAN id=span_dt_dt style="color: #818181;"></SPAN></p>
			<script language=javascript>
						function show_date_time(){
							window.setTimeout("show_date_time()", 1000);
							BirthDay = new Date("4/1/2018 00:00:00");
							today = new Date();
							timeold = (today.getTime()-BirthDay.getTime());
							sectimeold = timeold/1000
							secondsold = Math.floor(sectimeold);
							msPerDay = 24*60*60*1000
							e_daysold = timeold/msPerDay
							daysold = Math.floor(e_daysold);
							e_hrsold = (e_daysold-daysold)*24;
							hrsold = Math.floor(e_hrsold);
							e_minsold = (e_hrsold-hrsold)*60;
							minsold = Math.floor((e_hrsold-hrsold)*60);
							seconds = Math.floor((e_minsold-minsold)*60);
							span_dt_dt.innerHTML = ""+daysold + "天" + hrsold + "小时" + minsold + "分"+seconds+"秒";
						}
					show_date_time();
				</script>
		</div>
		</div>
</body>
<script type="text/javascript">
	mini.parse();
	var form = new nui.Form("#form1");
	nui.get("acOperator/userid").focus();
	//清空窗体值方法
	function onResetClick(e) {
		var form = new nui.Form("#loginWindow");
		form.clear();
	}
	//系统登陆方法
	function login() {
		form.validate();
		if (form.isValid() == false) {
			return;
		}
		var data = form.getData(); //获取表单多个控件的数据
		var json = nui.encode(data); //序列化成JSON
		nui.ajax({
			url : "./checkUser.action",
			data : {
				data : json
			},
			type : 'POST',
			success : function(text) {
				var check = nui.decode(text);
				if (check == '1') {
					window.location.href = "./showEmployeeInformation.action";
				} else if (check == '0') {
					addError("validGroupLi", "用户名或密码错误，请重新输入！");
				} else if (check == '2') {
					addError("validGroupLi", "此用户为停用状态，请联系系统管理员。");
				}
			}
		});
	}
	//窗体重置
	function reset() {
		form.reset();
	}
	function addError(errorId, errorText) {
		removeError(errorId);
		var jq = jQuery("#validGroup1");
		jq.append('<li id="' + errorId + '">' + errorText + '</li>');
	}
	function removeError(errorId) {
		var el = document.getElementById(errorId);
		jQuery(el).remove();
	}
	function onCheckUserId(e) {
		if (e.isValid) {
			if (e.value == "") {
				e.errorText = "用户名不能为空！";
				e.isValid = false;
			}
		}
	}

	function onCheckPassword(e) {
		if (e.isValid) {
			if (e.value == "") {
				e.errorText = "密码不能为空！";
				e.isValid = false;
				return;
			}
		}
	}

	//获取键盘 Enter 键事件并响应登录
	function keyboardLogin(e) {
		login();
	}
</script>
</html>